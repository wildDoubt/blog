---
title: "백준 16884번 나이트 게임"
date: 2021-10-10T13:52:50+09:00
description: "백준 16884번 나이트 게임 풀이"
featured: true
draft: false
toc: false
codeMaxLines: 100
codeLineNumbers: true
figurePositionShow: true
categories:
  - Algorithm
tags:
  - point_symmetry
---

문제: https://www.acmicpc.net/problem/16884

# 1. 문제 정리 및 접근

크기가 N x N인 체스판에서 나이트를 하나씩 번갈아가면서 놓는데 누가 이기는지 판단하는 문제다.

## 1.1 입력

```
  > T
  > N_1
  > N_2
  > ...
  > N_T
```
첫 줄에 테스트케이스의 개수 T를 입력받고 T개만큼 N이 주어진다.

## 1.2 출력

주어진 N에 대해 누가 이기는지 출력하면 된다.

# 2. 문제 해결방안 구상

## 2.1 잘못된 접근 방법

1. 일단 n이 주어지면 나이트 이동 범위의 조건에 맞게 전부 다 배치
2. k가 이긴다고 가정하고 하나씩 선택해서 지움
3. 시작이 k가 아니면 이건 답이 아님

처음에는 위와 같이 생각했었는데 1. 에서 어떻게 construct 하냐에 따라 같은 N x N의 체스판임에도 결과가 달라지는 것을 알 수 있었다. 그래서 이 접근방법은 버리고 다시 처음부터 작은 N에서 어떻게 답을 찾을 수 있는지 생각해보았다.

## 2.2 작은 N에 대해 시도

1. N=1일 때는 koosaga가 이긴다.

2. N=2일 때는 cubelover가 이긴다.

3. N=3일 때는 모든 경우를 살펴봐야하는데 점대칭이므로 전부 다 보지 않고 일부만 봐도 된다.
<p align="center">
  <img src="/images/boj16884_knight_1.PNG">
  <img src="/images/boj16884_knight_2.PNG">
</p>
위의 두 경우는 회전하면 같은 형태이므로 하나만 살펴봐도 된다. 그러면 살펴봐야할 경우의 수는 아래와 같다.

<p align="center">
  <img src="/images/boj16884_knight_3.PNG">
</p>
k가 이기려면 3가지 상황 중 어떤 상황을 선택해야할지 생각해봐야 한다. 첫 번째와 두 번째 상황에서는 c가 최선의 방법을 선택하면 k는 질 수 있다. 마지막 세 번째 상황을 자세하게 살펴보자.

<p align="center">
  <img src="/images/boj16884_knight_4.PNG">
</p>

k가 중앙에 두고 c가 위와 같이 반응했다고 가정하면 2가지 상황에 대해서만 확인하면 된다.

<p align="center">
  <img src="/images/boj16884_knight_5.PNG">
</p>

각 상황에 맞추어서 다음 k를 위와 같이 두면 k는 항상 이길 수 있다. 여기서 k가 선택한 위치와 직전에 c가 둔 위치와의 관계를 살펴보면 서로 점대칭한 관계인데, n이 클 때도 같은 방법으로 접근해서 결과를 살펴보면 항상 상대방이 둔 수와 점대칭한 지점에 두면 반드시 이긴다는 것을 알 수 있다.

이제 필승전략을 알았으니 N이 홀수일 때와 짝수일 때의 경우를 나누어서 생각할 수 있다. 

N이 홀수일 때는 정중앙에 나이트를 두게 되면 상대방은 점대칭한 공간을 찾을 수 없기 때문에 가능한 지점 중 한 곳을 선택해야 한다. 결국 선공은 후공이 두는 지점에 점대칭한 지점을 찾아서 두면 되기 때문에 결국에 후공이 지게 된다.

N이 짝수일 때는 홀수일 때와 달리 선택한 지점과 점대칭한 지점이 일치하는 점이 존재하지 않는다. 따라서 홀수일 때의 선공은 짝수일 때의 후공은 같은 상황임을 알 수 있다.

필승전략은 상대방이 둔 수에 점대칭한 지점을 찾아서 두면 되는데 항상 점대칭한 지점이 비어있다는 것을 증명할 수 있다.
<details>
  <summary>증명</summary>
  <div markdown="1">
    <p>현재 주어진 나이트 위치들의 집합을 S라고 하자. 그러면 다음과 같은 관계가 성립한다.</p>
    <p>가능한 지점 np에 둘 수 있다. <=> 집합 S의 모든 점 p에 대해 p와 np 사이의 거리는 sqrt(5)가 아니다.</p>
    <p>중앙 c에 의해 점대칭인 집합 S을 가정하자. 집합 S의 모든 점 p를 점대칭한 2c-p도 S의 원소이다.</p>
    <p>np에 나이트를 두었을 때 2c-np에 둘 수 없다고 가정하자.</p>
    <p align="center">
      <img src="/images/boj16884_knight_6.PNG">
    </p>
    <p>2c-np에 둘 수 없다는 말은 2c-np와 거리가 sqrt(5)인 p가 존재한다는 뜻이다. 그러면 2c-p와 np사이의 거리도 sqrt(5)가 되어야 하는데 이는 np에 나이트를 둔다는 상황에 모순이다. 따라서 np에 나이트를 두었을 때 2c-np에 항상 둘 수 있다.</p>
  </div>
</details>

# 3. 코드 작성

```c++
#include <iostream>

using namespace std;

int main(){
  int T, N;
  cin>>T;

  while(T--){
    cin>>N;
    if(N%2) cout<<"koosaga";
    else cout<<"cubelover";
    cout<<'\n';
  }

  return 0;
}
```


# 4. 결과 및 분석

풀이를 처음부터 혼자서 생각해내기 쉽지 않았는데 친구한테 답에 도달하기까지의 과정을 배울 수 있어서 좋은 경험이었다. 오히려 문제를 못 푼게 큰 도움이 되었는데 만약 운이 좋아서 N이 작을 상황에서 홀수면 koosaga가 이기고 짝수면 cubelover가 이기는 패턴을 보고 바로 제출했으면 정답 처리를 받고 깊게 다시 생각해볼 기회가 없었을 것 같다. 
